(window.webpackJsonp=window.webpackJsonp||[]).push([[34],{404:function(s,a,t){"use strict";t.r(a);var n=t(20),e=Object(n.a)({},(function(){var s=this,a=s.$createElement,t=s._self._c||a;return t("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[t("h1",{attrs:{id:"服务端状态"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#服务端状态"}},[s._v("#")]),s._v(" 服务端状态")]),s._v(" "),t("p",[s._v("服务器状态查询会返回一个以制表符分隔的列表，以下命令都可以接受一个可选的 vhost 参数显示结果，默认值为 "),t("code",[s._v("/")])]),s._v(" "),t("ul",[t("li",[s._v("list_queues")]),s._v(" "),t("li",[s._v("list_exchanges")]),s._v(" "),t("li",[s._v("list_bindings")]),s._v(" "),t("li",[s._v("list_consumers")])]),s._v(" "),t("h2",{attrs:{id:"队列信息：list-queues"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#队列信息：list-queues"}},[s._v("#")]),s._v(" 队列信息：list_queues")]),s._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[s._v("rabbitmqctl list_queues "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("p vhost"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("queueinfoitem "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("..")]),s._v("."),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("p",[s._v("返回队列的详细信息。queueinfoitem 用于 设置哪些队列的信息会包含在结果集中，结果集的列顺序将匹配参数的顺序。可以是下面的人任何值：")]),s._v(" "),t("ul",[t("li",[s._v("name：队列名称")]),s._v(" "),t("li",[s._v("durable：队列是否持久化")]),s._v(" "),t("li",[s._v("auto_delete：队列是否自动删除")]),s._v(" "),t("li",[s._v("arguments：队列的参数")]),s._v(" "),t("li",[s._v("policy：应用到队列上的策略名称")]),s._v(" "),t("li",[s._v("pid：队列关联的 Erlang 进程的 ID")]),s._v(" "),t("li",[s._v("owner_pid：处理排他队列链接的 Erlang 进程 ID。如果此队列是非排他的，此值为空。")]),s._v(" "),t("li",[s._v("exclusive：队列是否排他的")]),s._v(" "),t("li",[s._v("exclusive_consumer_pid：订阅到此队列的消费者相关信道关联的 Erlang 进程 ID。如果此队列是非排他的，此值为空")]),s._v(" "),t("li",[s._v("exclusive_consumer_tag：订阅到此排他队列的消费者的 consumerTag。如果此队列是非排他的。此值为空。")]),s._v(" "),t("li",[s._v("messages_ready：准备发送给客户端的消息个数")]),s._v(" "),t("li",[s._v("messages_unacknowledged：发送给客户端但尚未应答的消息个数")]),s._v(" "),t("li",[s._v("messages：准备发送给客户端和未应答消息的总和")]),s._v(" "),t("li",[s._v("messages_ready_ram：驻留在内存中 messages_ready 的消息个数")]),s._v(" "),t("li",[s._v("messages_unacknowledged_ram：驻留在内中  messages_unacknowledged 的消息个数")]),s._v(" "),t("li",[s._v("messages_ram：驻留在内存中的消息总数")]),s._v(" "),t("li",[s._v("messages_persistent：队列中持久化消息的个数。对于非持久化队列来说总是 0。")]),s._v(" "),t("li",[s._v("messages_bytes：队列中所有消息的大小总和。这里不包括消息属性或则任何其他开销。")]),s._v(" "),t("li",[s._v("message_bytes_ready：准备发送给客户端的消息的大小总和")]),s._v(" "),t("li",[s._v("message_bytes_unacknowledged：发送给客户端但尚未应答的消息的大小总和")]),s._v(" "),t("li",[s._v("message_bytes_ram：驻留在内存中的  message_bytes")]),s._v(" "),t("li",[s._v("messages_bytes_persistent：队列中持久化的 message_bytes")]),s._v(" "),t("li",[s._v("disk_reads：从队列启动开始，已从磁盘中读取该队列的消息总次数")]),s._v(" "),t("li",[s._v("disk_writes：从队列启动开始，已向磁盘队列写消息的总次数")]),s._v(" "),t("li",[s._v("consumer：消费者数目")]),s._v(" "),t("li",[s._v("consumer_utilisation：队列中的消息能够立刻投递给消费者的比率。介于 0 和 1 之间。受网络拥塞或则 Basic.Qos 的影响而小于 1.")]),s._v(" "),t("li",[s._v("memory：与队列相关的 Erlang 进程所消耗的内存字节数，包括栈、堆及内部结构")]),s._v(" "),t("li",[s._v("slave_pids：如果队列是镜像的，列出所有 slave 镜像的 pid")]),s._v(" "),t("li",[s._v("synchronised_slave_pids：如果队列是镜像的，列出所有已经同步的 slave 镜像的 pid")]),s._v(" "),t("li",[s._v("state：队列状态\n"),t("ul",[t("li",[s._v("running：运行中")]),s._v(" "),t("li",[s._v("syncing、MsgCount：队列正常同步数据库可能的状态")]),s._v(" "),t("li",[s._v("down：如果队列所在的节点掉线了，则显示 down。此时大多数的 queueinfoitems 也将不可用")])])])]),s._v(" "),t("p",[s._v("如果没有指定 queueinfoitems ，则显示队列的名称和消息的个数。例如：")]),s._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 默认显示队列名称和消息个数")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@study rabbitmq"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# rabbitmqctl list_queues")]),s._v("\nListing queues\nqueue_demo      "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("205")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@study rabbitmq"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# rabbitmqctl list_queues name durable auto_delete arguments -q")]),s._v("\nqueue_demo      "),t("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("true")]),s._v("    "),t("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("false")]),s._v("   "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br")])]),t("h2",{attrs:{id:"交换器信息-list-exchanges"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#交换器信息-list-exchanges"}},[s._v("#")]),s._v(" 交换器信息 list_exchanges")]),s._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[s._v("rabbitmqctl list_exchanges "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("-p vhost"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("exchangeinfoitem"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("..")]),s._v("."),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("p",[s._v("exchangeinfoitem 可以指定以下值：")]),s._v(" "),t("ul",[t("li",[s._v("name：交换器名称")]),s._v(" "),t("li",[s._v("type：交换器类型")]),s._v(" "),t("li",[s._v("durable：是否持久化")]),s._v(" "),t("li",[s._v("auto_delete：是否自动删除")]),s._v(" "),t("li",[s._v("internal：是否是内置的")]),s._v(" "),t("li",[s._v("arguments：其他一些结构化参数，比如 alternate-exchange")]),s._v(" "),t("li",[s._v("policy：应用到交换器上的策略名称")])]),s._v(" "),t("p",[s._v("exchangeinfoitem 的内容和客户端中的 channel.exchangeDeclare 方法的参数基本一致。如果没有指定 exchangeinfoitem 则默认显示交换器的名称和类型，例如：")]),s._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@study rabbitmq"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# rabbitmqctl list_exchanges")]),s._v("\nListing exchanges\namq.topic       topic\namq.direct      direct\namq.headers     headers\namq.match       headers\namq.rabbitmq.log        topic\namq.rabbitmq.trace      topic\nexchange_demo   direct\namq.fanout      fanout\n       \t\t    direct\n       \t\t    \n\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@study rabbitmq"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# rabbitmqctl list_exchanges name type durable auto_delete internal arguments policy -q")]),s._v("\namq.topic       \ttopic   "),t("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("true")]),s._v("    "),t("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("false")]),s._v("   "),t("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("false")]),s._v("   "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\namq.direct      \tdirect  "),t("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("true")]),s._v("    "),t("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("false")]),s._v("   "),t("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("false")]),s._v("   "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\namq.headers     \theaders "),t("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("true")]),s._v("    "),t("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("false")]),s._v("   "),t("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("false")]),s._v("   "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\namq.match       \theaders "),t("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("true")]),s._v("    "),t("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("false")]),s._v("   "),t("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("false")]),s._v("   "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\namq.rabbitmq.log    topic   "),t("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("true")]),s._v("    "),t("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("false")]),s._v("   "),t("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("true")]),s._v("    "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\namq.rabbitmq.trace  topic   "),t("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("true")]),s._v("    "),t("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("false")]),s._v("   "),t("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("true")]),s._v("    "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\nexchange_demo   \tdirect  "),t("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("true")]),s._v("    "),t("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("false")]),s._v("   "),t("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("false")]),s._v("   "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\namq.fanout      \tfanout  "),t("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("true")]),s._v("    "),t("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("false")]),s._v("   "),t("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("false")]),s._v("   "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n        \t\t\tdirect  "),t("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("true")]),s._v("    "),t("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("false")]),s._v("   "),t("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("false")]),s._v("   "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br"),t("span",{staticClass:"line-number"},[s._v("13")]),t("br"),t("span",{staticClass:"line-number"},[s._v("14")]),t("br"),t("span",{staticClass:"line-number"},[s._v("15")]),t("br"),t("span",{staticClass:"line-number"},[s._v("16")]),t("br"),t("span",{staticClass:"line-number"},[s._v("17")]),t("br"),t("span",{staticClass:"line-number"},[s._v("18")]),t("br"),t("span",{staticClass:"line-number"},[s._v("19")]),t("br"),t("span",{staticClass:"line-number"},[s._v("20")]),t("br"),t("span",{staticClass:"line-number"},[s._v("21")]),t("br"),t("span",{staticClass:"line-number"},[s._v("22")]),t("br"),t("span",{staticClass:"line-number"},[s._v("23")]),t("br"),t("span",{staticClass:"line-number"},[s._v("24")]),t("br")])]),t("h2",{attrs:{id:"绑定关系信息：list-bindings"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#绑定关系信息：list-bindings"}},[s._v("#")]),s._v(" 绑定关系信息：list_bindings")]),s._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[s._v("rabbitmqctl list_bindings "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("-p vhost"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("bindinginfoitem"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("..")]),s._v("."),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("p",[s._v("bindinginfoitem 可以包含如下的值：")]),s._v(" "),t("ul",[t("li",[s._v("source_name：绑定中消息来源的名称")]),s._v(" "),t("li",[s._v("source_kind：绑定中消息来源的类别")]),s._v(" "),t("li",[s._v("destination_name：绑定中消息目的地名称")]),s._v(" "),t("li",[s._v("destination_kind：绑定中消息目的地的种类")]),s._v(" "),t("li",[s._v("routing_key：绑定的路由键")]),s._v(" "),t("li",[s._v("arguments：绑定的参数")])]),s._v(" "),t("p",[s._v("如果没有指定 bindinginfoitem ，则显示所有信息")]),s._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@study rabbitmq"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# rabbitmqctl list_bindings")]),s._v("\nListing bindings\n\t\t\t\texchange        queue_demo      queue   \t\tqueue_demo  "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\nexchange_demo   exchange        queue_demo      queue   \troutingky_demo  "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br")])]),t("p",[s._v("第一行：默认的交换器与队列 queue_demo 通过 queue_demo 绑定")]),s._v(" "),t("p",[s._v("第二行：交换器 exchange_demo 和队列 queue_demo 通过 routingky_demo 进行绑定。")]),s._v(" "),t("h2",{attrs:{id:"tcp-ip-连接统计信息：list-connections"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#tcp-ip-连接统计信息：list-connections"}},[s._v("#")]),s._v(" TCP/IP 连接统计信息：list_connections")]),s._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[s._v("rabbitmqctl list_connections "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("connectioninfoitem "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("..")]),s._v("."),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("p",[s._v("返回 TCP/IP 连接统计信息。connectioninfoitem 可以包含如下值：")]),s._v(" "),t("ul",[t("li",[t("p",[s._v("pid：与连接相关的 Erlang 进程 ID")])]),s._v(" "),t("li",[t("p",[s._v("name：连接的名称")])]),s._v(" "),t("li",[t("p",[s._v("port：服务器端口")])]),s._v(" "),t("li",[t("p",[s._v("host：返回反向 DNS 获取的服务器主机名称，或则 IP 地址，或则未启用")])]),s._v(" "),t("li",[t("p",[s._v("peer_port：服务器对端端口。当一个客户端与服务器连接时，这个客户端的端口就是 peer_port")])]),s._v(" "),t("li",[t("p",[s._v("peer_host：返回反向 DNS 获取的对端主机名称，或则 IP 地址，或则未启用")])]),s._v(" "),t("li",[t("p",[s._v("ssl：是否启用 SSL")])]),s._v(" "),t("li",[t("p",[s._v("ssl_protocol：SSL 协议，如 tlsvl")])]),s._v(" "),t("li",[t("p",[s._v("ssl_key_exchange：SSL 密匙交换算法，如 rsa")])]),s._v(" "),t("li",[t("p",[s._v("ssl_cipher：SSL 加密算法，如 aes_256_cbc")])]),s._v(" "),t("li",[t("p",[s._v("ssl_hash：SSL 哈希算法，如 sha")])]),s._v(" "),t("li",[t("p",[s._v("peer_cert_subject：对端的 SSL 安全证书的主题，基于 RFC4514 的形式")])]),s._v(" "),t("li",[t("p",[s._v("peer_cert_issuer：对端 SSL 安全证书的发行者，基于 RFC4514")])]),s._v(" "),t("li",[t("p",[s._v("peer_cert_validity：对端 SSL 安全证书的有效期")])]),s._v(" "),t("li",[t("p",[s._v("state：链接状态。包括：")]),s._v(" "),t("ul",[t("li",[s._v("starting")]),s._v(" "),t("li",[s._v("tuning")]),s._v(" "),t("li",[s._v("opening")]),s._v(" "),t("li",[s._v("running")]),s._v(" "),t("li",[s._v("flow")]),s._v(" "),t("li",[s._v("blocking")]),s._v(" "),t("li",[s._v("blocked")]),s._v(" "),t("li",[s._v("closing")]),s._v(" "),t("li",[s._v("closed")])])]),s._v(" "),t("li",[t("p",[s._v("channels：该连接中的信道个数")])]),s._v(" "),t("li",[t("p",[s._v("protocol：使用的 AMQP 协议的版本")]),s._v(" "),t("p",[s._v("当前是 "),t("code",[s._v("{0,9,1}")]),s._v(" 或 "),t("code",[s._v("{0,8,0}")]),s._v("，如果客户请求的是 AMQP 0-9 的连接，RabbitMQ 也会将其视为 0-9-1")])]),s._v(" "),t("li",[t("p",[s._v("auth_mechanism：使用 SASL 认证机制，如 PLAIN、AMQPLAIN、EXTERNAL、RABBIT-CR-DEMO 等")])]),s._v(" "),t("li",[t("p",[s._v("user：与连接相关的用户名")])]),s._v(" "),t("li",[t("p",[s._v("vhost：与连接先关的 vhost 名称")])]),s._v(" "),t("li",[t("p",[s._v("timeout：链接超时/协商的心跳间隔，单位为秒")])]),s._v(" "),t("li",[t("p",[s._v("frame_max：最大传输帧的大小，单位为 B")])]),s._v(" "),t("li",[t("p",[s._v("channel_max：此连接上信道的最大数量")]),s._v(" "),t("p",[s._v("如果是 0，则表示无限，客户端一般会将 0 转为 65535")])]),s._v(" "),t("li",[t("p",[s._v("client_properties：在建立链接期间由客户端发送的信息属性")])]),s._v(" "),t("li",[t("p",[s._v("recv_oct：收到的字节数")])]),s._v(" "),t("li",[t("p",[s._v("recv_cnt：收到的数据包个数")])]),s._v(" "),t("li",[t("p",[s._v("send_oct：发送的字节数")])]),s._v(" "),t("li",[t("p",[s._v("send_cnt：发送的数据包个数")])]),s._v(" "),t("li",[t("p",[s._v("send_pend：发送队列大小")])]),s._v(" "),t("li",[t("p",[s._v("connected_at：链接建立的时间戳")])])]),s._v(" "),t("p",[s._v("如果么有指定 connectioninfoitem ，那么默认显示 user、peer_host、peer_port 和 state 信息")]),s._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@study rabbitmq"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# rabbitmqctl list_connections")]),s._v("\nListing connections\nadmin   "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("192.168")]),s._v(".4.170   "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("52397")]),s._v("   running\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 自定义显示")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@study rabbitmq"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# rabbitmqctl list_connections pid name host -q")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("rabbit@study.3.1744."),t("span",{pre:!0,attrs:{class:"token operator"}},[t("span",{pre:!0,attrs:{class:"token file-descriptor important"}},[s._v("0")]),s._v(">")]),s._v("   "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("192.168")]),s._v(".4.170:52434 -"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("192.168")]),s._v(".4.250:5672       "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("192.168")]),s._v(".4.250\n\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br")])]),t("h2",{attrs:{id:"信道信息：list-channels"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#信道信息：list-channels"}},[s._v("#")]),s._v(" 信道信息：list_channels")]),s._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[s._v("rabbitmqctl list_channels "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("channelinfoitem "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("..")]),s._v("."),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("p",[s._v("返回当前所有信息信息。 channelinfoitem 可包含以下值：")]),s._v(" "),t("ul",[t("li",[s._v("pid：与连接相关的 Erlang 进程 ID")]),s._v(" "),t("li",[s._v("connection：信道所属链接的 Erlang 进程 ID")]),s._v(" "),t("li",[s._v("name：信道的名称")]),s._v(" "),t("li",[s._v("number：信道的序号")]),s._v(" "),t("li",[s._v("user：与信道相关的用户名称")]),s._v(" "),t("li",[s._v("vhost：与信道相关的 vhost")]),s._v(" "),t("li",[s._v("transactional：信道是否处于事物模式")]),s._v(" "),t("li",[s._v("confirm：信道是否处于 publisher confirm 模式")]),s._v(" "),t("li",[s._v("consumer_count：信道中的消费者的个数")]),s._v(" "),t("li",[s._v("messages_unacknowledged：已投递但是还未被 ack 的消息个数")]),s._v(" "),t("li",[s._v("messages_uncommitted：已接收但还未提交事物的消息个数")]),s._v(" "),t("li",[s._v("acks_uncommitted：已 ack 收到但是还未提交事物的消息个数")]),s._v(" "),t("li",[s._v("messages_unconfirmed：已发送但是还未确认的消息个数。如果信道不处于 publisher confirm 模式下，则此值为 0")]),s._v(" "),t("li",[s._v("perfetch_count：新消费者的 Qos 个数限制。0 标识无上限")]),s._v(" "),t("li",[s._v("global_perfetch_count：整个信道的 Qos 个数限制。0 表示无上限")])]),s._v(" "),t("p",[s._v("如果没有指定 channelinfoitem ，则显示：pid、user、consumer_count 、messages_unacknowledged")]),s._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 默认信息")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@study rabbitmq"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# rabbitmqctl list_channels")]),s._v("\nListing channels\n"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("rabbit@study.3.1833."),t("span",{pre:!0,attrs:{class:"token operator"}},[t("span",{pre:!0,attrs:{class:"token file-descriptor important"}},[s._v("0")]),s._v(">")]),s._v(" admin   "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("       "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("3")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 自定义信息")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@study rabbitmq"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# rabbitmqctl list_channels pid connection -q")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("rabbit@study.3.1854."),t("span",{pre:!0,attrs:{class:"token operator"}},[t("span",{pre:!0,attrs:{class:"token file-descriptor important"}},[s._v("0")]),s._v(">")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("rabbit@study.3.1846."),t("span",{pre:!0,attrs:{class:"token operator"}},[t("span",{pre:!0,attrs:{class:"token file-descriptor important"}},[s._v("0")]),s._v(">")]),s._v("\n\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br")])]),t("h2",{attrs:{id:"消费者信息：list-consumers"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#消费者信息：list-consumers"}},[s._v("#")]),s._v(" 消费者信息：list_consumers")]),s._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[s._v("rabbitmqctl list_consumers "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v(" -p vhost"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("p",[s._v("显示消费者信息。每行将显示队列名称、相关信道的进程标识、consumerTag、是否需要消费端确认、prefetch_count 以及参数列表信息。")]),s._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@study rabbitmq"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# rabbitmqctl list_consumers")]),s._v("\nListing consumers\nqueue_demo      "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("rabbit@study.3.1876."),t("span",{pre:!0,attrs:{class:"token operator"}},[t("span",{pre:!0,attrs:{class:"token file-descriptor important"}},[s._v("0")]),s._v(">")]),s._v(" amq.ctag-1XZgy5ShO6X6e1qi7NQnTQ "),t("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("true")]),s._v("    "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("3")]),s._v("       "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br")])]),t("h2",{attrs:{id:"broker-状态：status"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#broker-状态：status"}},[s._v("#")]),s._v(" Broker 状态：status")]),s._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[s._v("rabbitmqctl status\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("p",[s._v("显示 Broker 状态，信息很多，例如有：Erlang 节点上运行的应用程序、RabbitMQ/Erlang 的版本信息、OS 名称、内存文件描述符等统计信息")]),s._v(" "),t("h2",{attrs:{id:"健康检查：node-health-check"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#健康检查：node-health-check"}},[s._v("#")]),s._v(" 健康检查：node_health_check")]),s._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[s._v("rabbitmqctl node_health_check\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("p",[s._v("对 RabbitMQ 节点进行健康检查，确认应用是否在很长运行、list_queues 和 list_channels 是否能够正常返回等。")]),s._v(" "),t("p",[s._v("例如：")]),s._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@study rabbitmq"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# rabbitmqctl node_health_check")]),s._v("\nTimeout: "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("70.0")]),s._v(" seconds\nChecking health of node rabbit@study\nHealth check passed\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br")])]),t("h2",{attrs:{id:"环境变量：environment"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#环境变量：environment"}},[s._v("#")]),s._v(" 环境变量：environment")]),s._v(" "),t("p",[s._v("显示每个运行程序环境中的变量和值")]),s._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[s._v("rabbitmqctl environment\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("p",[s._v("返回信息很多，例如：")]),s._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@study rabbitmq"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# rabbitmqctl environment")]),s._v("\nApplication environment of node rabbit@study\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("amqp_client,"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("prefer_ipv6,false"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v(","),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("ssl_options,"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v(",\n "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("asn1,"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v(",\n "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("compiler,"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v(",\n "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("cowboy,"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v(",\n "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("cowlib,"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v(",\n "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("crypto,"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v(",\n "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("inets,"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v(",\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("..")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("..")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br")])]),t("h2",{attrs:{id:"服务器状态报告：report"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#服务器状态报告：report"}},[s._v("#")]),s._v(" 服务器状态报告：report")]),s._v(" "),t("p",[s._v("为所有服务器状态生成一个服务器状态报告，并将输出从定向到一个文件。")]),s._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[s._v("rabbitmqctl report "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" report.txt\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("p",[s._v("这个信息也是有很多的。例如：")]),s._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@study ~"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# cat report.txt")]),s._v("\nReporting server status on "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("2020,6")]),s._v(",29"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v(","),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0,21")]),s._v(",37"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n\n\nStatus of node rabbit@study\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("pid,20378"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v(",\n "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("running_applications,\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("..")]),s._v(".\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br")])]),t("h2",{attrs:{id:"执行-erlang-表达式：eval"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#执行-erlang-表达式：eval"}},[s._v("#")]),s._v(" 执行 Erlang 表达式：eval")]),s._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[s._v("rabbitmqctl "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("eval")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("expr"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("p",[s._v("执行任意 Erlang 表达式。")]),s._v(" "),t("p",[s._v("例如：返回 rabbitmqctl 连接的节点名称")]),s._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@study ~"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# rabbitmqctl eval 'node().'")]),s._v("\nrabbit@study\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br")])]),t("h2",{attrs:{id:"eval-的扩展知识"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#eval-的扩展知识"}},[s._v("#")]),s._v(" eval 的扩展知识")]),s._v(" "),t("p",[s._v("用户、Parameter、vhost、权限等都可以通过 rabbitmqctl 工具来完成创建/删除操作。")]),s._v(" "),t("p",[s._v("而 "),t("strong",[s._v("交换器、队列及绑定关系的创建/删除操作没有相应的工具")]),s._v(" 来完成。到目前为止的介绍，只有通 "),t("strong",[s._v("过客户端")]),s._v(" 或 "),t("strong",[s._v("Web 管理界面")]),s._v(" 来完成。")]),s._v(" "),t("p",[s._v("但是可以通过 "),t("code",[s._v("rabbitmqctl eval {expr}")]),s._v(" 的方式来实现创建交换器、队列及绑定关系。")]),s._v(" "),t("p",[s._v("下面的命令：创建一个交换器  exchange2、一个队列 queue2 ，并通过绑定建 rk2 进行绑定")]),s._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[s._v("rabbitmqctl "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("eval")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('\'rabbit_exchange:declare({resource,<<"/">>,exchange,<<"exchange2">>},direct,true,false,false,[]).\'')]),s._v("\nrabbitmqctl "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("eval")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('\'rabbit_amqqueue:declare({resource,<<"/">>,queue,<<"queue2">>},true,false,[],none).\'')]),s._v("\nrabbitmqctl "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("eval")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('\'rabbit_binding:add({binding,{resource,<<"/">>,exchange,<<"exchange2">>},<<"rk2">>,{resource,<<"/">>,queue,<<"queue2">>},[]}).\'')]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br")])]),t("p",[s._v("执行之后，查看绑定关系就看到如下信息")]),s._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[s._v("  "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@study ~"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# rabbitmqctl list_bindings")]),s._v("\nListing bindings\n                exchange        queue2  \t\tqueue   queue2  \t\t"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n                exchange        queue_demo      queue   queue_demo      "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\nexchange2       exchange        queue2  \t\tqueue   rk2     \t\t"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\nexchange_demo   exchange        queue_demo      queue   routingky_demo  "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@study ~"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#")]),s._v("\n\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br")])]),t("p",[s._v("这里其实是调用了 Erlang 中对应模块的相应函数。语法类似 "),t("code",[s._v("Module:Function(Arg).")])]),s._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 删除交换器")]),s._v("\nrabbitmqctl "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("eval")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('\'rabbit_exchange:delete({resource,<<"/">>,exchange,<<"exchange2">>},false).\'')]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 删除队列")]),s._v("\nrabbitmqctl "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("eval")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('\'rabbit_amqqueue:internal_delete({resource,<<"/">>,queue,<<"queue2">>}).\'')]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 删除绑定关系")]),s._v("\nrabbitmqctl "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("eval")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('\'rabbit_binding:remove({binding,{resource,<<"/">>,exchange,<<"exchange2">>},<<"rk2">>,{resource,<<"/">>,queue,<<"queue2">>},[]}).\'')]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br")])])])}),[],!1,null,null,null);a.default=e.exports}}]);