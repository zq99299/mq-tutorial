(window.webpackJsonp=window.webpackJsonp||[]).push([[32],{406:function(s,t,a){"use strict";a.r(t);var n=a(20),e=Object(n.a)({},(function(){var s=this,t=s.$createElement,a=s._self._c||t;return a("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[a("h1",{attrs:{id:"用户管理：user"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#用户管理：user"}},[s._v("#")]),s._v(" 用户管理：user")]),s._v(" "),a("p",[s._v("在 RabbitMQ 中，"),a("strong",[s._v("用户")]),s._v(" 是访问控制（Access Control）的基本单元，且用户可以跨越多个 vhost 授权。使用标准的用户名和密码来认证用户。")]),s._v(" "),a("h2",{attrs:{id:"创建用户：add-user"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#创建用户：add-user"}},[s._v("#")]),s._v(" 创建用户：add_user")]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[s._v("rabbitmqctl add_user "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("username"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("password"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("p",[s._v("实践练习")]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@study ~"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# rabbitmqctl add_user test1 123456")]),s._v("\nCreating user "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"test1"')]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br")])]),a("h2",{attrs:{id:"修改密码：change-password"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#修改密码：change-password"}},[s._v("#")]),s._v(" 修改密码：change_password")]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[s._v("rabbitmqctl change_password "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("username"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("newpassword"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("p",[s._v("实践练习")]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@study ~"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# rabbitmqctl change_password test1 1234567")]),s._v("\nChanging password "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("for")]),s._v(" user "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"test1"')]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br")])]),a("h2",{attrs:{id:"清除密码：clear-password"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#清除密码：clear-password"}},[s._v("#")]),s._v(" 清除密码：clear_password")]),s._v(" "),a("p",[s._v("清除密码后，该用户就不能使用密码登录了")]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[s._v("rabbitmqctl change_password "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("username"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v(" \n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("h2",{attrs:{id:"验证用户密码：authenticate-user"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#验证用户密码：authenticate-user"}},[s._v("#")]),s._v(" 验证用户密码：authenticate_user")]),s._v(" "),a("p",[s._v("可以验证用户密码是否匹配")]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[s._v("rabbitmqctl authenticate_user "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("username"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("newpassword"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("p",[s._v("实践练习")]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 验证失败")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@study ~"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# rabbitmqctl authenticate_user test1 123456")]),s._v("\nAuthenticating user "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"test1"')]),s._v("\nError: failed to authenticate user "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"test1"')]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 验证成")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@study ~"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# rabbitmqctl authenticate_user test1 1234567")]),s._v("\nAuthenticating user "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"test1"')]),s._v("\nSuccess\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br")])]),a("h2",{attrs:{id:"用户列表：list-users"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#用户列表：list-users"}},[s._v("#")]),s._v(" 用户列表：list_users")]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[s._v("rabbitmqctl list_users\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("p",[s._v("实践练习")]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@study ~"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# rabbitmqctl list_users")]),s._v("\nListing "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("users")]),s._v("\ntest1   "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\nadmin   "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("administrator"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\nguest   "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("administrator"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 可以看到有 3 个用户")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br")])]),a("p",[s._v("方括号中的是角色类型，有 5 种：")]),s._v(" "),a("ul",[a("li",[a("p",[s._v("none：无任何角色。新创建的为这种；怎么显示的是没有？")])]),s._v(" "),a("li",[a("p",[s._v("management：可以访问 web 管理页面（下一节讲解）")])]),s._v(" "),a("li",[a("p",[s._v("policymaker：")]),s._v(" "),a("p",[s._v("包含 management 的所有权限，并且可以管理 "),a("strong",[s._v("策略（Policy）")]),s._v(" 和 "),a("strong",[s._v("参数（Parameter）")]),s._v("（下一章讲解）")])]),s._v(" "),a("li",[a("p",[s._v("monitoring：")]),s._v(" "),a("p",[s._v("包含 management 的所有权限，并且可以看到所有连接、信道及节点相关的信息")])]),s._v(" "),a("li",[a("p",[s._v("administrator：")]),s._v(" "),a("p",[s._v("最高权限，包含 monitoring 的所有权限，并且可以管理用户、虚拟主机、权限、策略、参数等。")])])]),s._v(" "),a("h2",{attrs:{id:"设置角色-set-user-tags"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#设置角色-set-user-tags"}},[s._v("#")]),s._v(" 设置角色 set_user_tags")]),s._v(" "),a("p",[s._v("可以给用户设置角色，设置角色之后，现有的角色会被删除。也就是以这次设置的角色为准")]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[s._v("rabbitmqctl set_user_tags "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("username"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("tag "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("..")]),s._v("."),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n\ntag ：表示要设置的角色，可以多个，空格隔开\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br")])]),a("p",[s._v("实践练习")]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@study ~"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# rabbitmqctl set_user_tags test1 management policymaker")]),s._v("\nSetting tags "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("for")]),s._v(" user "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"test1"')]),s._v(" to "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("management,policymaker"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 查看用户，就看到了刚刚设置的角色")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@study ~"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# rabbitmqctl list_users")]),s._v("\nListing "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("users")]),s._v("\ntest1   "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("management, policymaker"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\nadmin   "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("administrator"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\nguest   "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("administrator"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 不带 tag 就是清空角色")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@study ~"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# rabbitmqctl set_user_tags test1")]),s._v("\nSetting tags "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("for")]),s._v(" user "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"test1"')]),s._v(" to "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br"),a("span",{staticClass:"line-number"},[s._v("14")]),a("br")])]),a("h2",{attrs:{id:"删除用户：delete-user"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#删除用户：delete-user"}},[s._v("#")]),s._v(" 删除用户：delete_user")]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[s._v("rabbitmqctl delete_user "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("username"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("p",[s._v("实践练习")]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@study ~"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# rabbitmqctl delete_user test1")]),s._v("\nDeleting user "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"test1"')]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br")])])])}),[],!1,null,null,null);t.default=e.exports}}]);