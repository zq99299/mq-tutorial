(window.webpackJsonp=window.webpackJsonp||[]).push([[37],{400:function(s,a,t){"use strict";t.r(a);var n=t(20),e=Object(n.a)({},(function(){var s=this,a=s.$createElement,t=s._self._c||a;return t("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[t("h1",{attrs:{id:"环境变量"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#环境变量"}},[s._v("#")]),s._v(" 环境变量")]),s._v(" "),t("p",[s._v("RabbitMQ 的环境变量都是以 "),t("code",[s._v("RABBITMQ_")]),s._v(" 作为前缀，设置方式有如下两种：")]),s._v(" "),t("ul",[t("li",[t("p",[s._v("Shell 环境中设置")]),s._v(" "),t("p",[s._v("在 Shell 中设置，不需要 "),t("code",[s._v("RABBITMQ_")]),s._v(" 这个前缀；")]),s._v(" "),t("p",[s._v("而且 "),t("strong",[s._v("优先级")]),s._v(" shell 最高，也就是说，当  shell 和 "),t("code",[s._v("rabbitmq-env.conf")]),s._v(" 同时设置了一个变量，则 shell 中的生效")])]),s._v(" "),t("li",[t("p",[t("code",[s._v("rabbitmq-env.conf")]),s._v("  环境变量配置文件中设置")]),s._v(" "),t("p",[s._v("默认路径在 "),t("code",[s._v("$RABBITMQ_HOME/etc/rabbitmq/")]),s._v(" 目录下，可以在启动 RabbitMQ 服务时，指定 "),t("code",[s._v("RABBITMQ_CONF_ENV_FILE")]),s._v(" 变量来设置此文件的路径")])])]),s._v(" "),t("h3",{attrs:{id:"启动时使用环境变量"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#启动时使用环境变量"}},[s._v("#")]),s._v(" 启动时使用环境变量")]),s._v(" "),t("p",[s._v("当采用 "),t("code",[s._v("rabbitmq-server -detached")]),s._v(" 方式启动 RabbitMQ 服务时，此服务节点默认以 "),t("code",[s._v("rabbit@当前 Sheel 环境的 hostname）（主机名）")]),s._v("来命名。即 "),t("code",[s._v("rabbit@$HOSTNAME")])]),s._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@study ~"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# echo $HOSTNAME")]),s._v("\nstudy.centos.mrcode\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@study ~"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# hostname")]),s._v("\nstudy.centos.mrcode\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br")])]),t("p",[s._v("如果是上面这样的，只会取第一个点前面的单词。")]),s._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@study ~"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# rabbitmqctl cluster_status")]),s._v("\nCluster status of node rabbit@study\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("nodes,"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("disc,"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("rabbit@study"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v(",\n "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("running_nodes,"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("rabbit@study"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v(",\n "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("cluster_name,"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<<")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"rabbit@study"')]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">>")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v(",\n "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("partitions,"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v(",\n "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("alarms,"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("rabbit@study,"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br")])]),t("p",[s._v("要指定节点名称，可以在 "),t("code",[s._v("rabbitmq-server")]),s._v(" 前添加变量来实现，如下所示")]),s._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@study ~"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# RABBITMQ_NODENAME=rabbit@study1 rabbitmq-server -detached")]),s._v("\nWarning: PID "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("file")]),s._v(" not written"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v(" -detached was passed.\nERROR: epmd error "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("for")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("host")]),s._v(" study1: nxdomain "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("non-existing domain"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br")])]),t("p",[s._v("环境变量的使用方式是正常了，但是貌似不能随意指定。可能和版本有关系。")]),s._v(" "),t("h3",{attrs:{id:"通过配置文件使用环境变量"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#通过配置文件使用环境变量"}},[s._v("#")]),s._v(" 通过配置文件使用环境变量")]),s._v(" "),t("p",[s._v("下面演示通过配置文件的方式来使用环境变量")]),s._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 进入配置文件目录")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@study ~"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# cd /opt/rabbitmq/etc/rabbitmq/")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 发现没有环境配置文件")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@study rabbitmq"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# ll")]),s._v("\n总用量 "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("4")]),s._v("\n-rw-r--r--. "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" root root "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("23")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("6")]),s._v("月  "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("29")]),s._v(" 05:03 enabled_plugins\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 我们新建这个文件")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@study rabbitmq"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# vim rabbitmq-env.conf")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 然后写一个 nodename 的变量")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("NODENAME")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("rabbit@node1\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 再启动看看该文件是否有生效，根据之前的测试，会读取到这个变量，并且会报错")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@study rabbitmq"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# rabbitmq-server -detached")]),s._v("\nWarning: PID "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("file")]),s._v(" not written"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v(" -detached was passed.\nERROR: epmd error "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("for")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("host")]),s._v(" node1: nxdomain "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("non-existing domain"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 能读取到，并且报错了，配置文件是生效的")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br"),t("span",{staticClass:"line-number"},[s._v("13")]),t("br"),t("span",{staticClass:"line-number"},[s._v("14")]),t("br"),t("span",{staticClass:"line-number"},[s._v("15")]),t("br"),t("span",{staticClass:"line-number"},[s._v("16")]),t("br"),t("span",{staticClass:"line-number"},[s._v("17")]),t("br")])]),t("p",[s._v("对于默认的取值规则，可以在 "),t("code",[s._v("$RABBITMQ_HOME/sbin/rabbitmq-defaults")]),s._v(" 文件中查看")]),s._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@study sbin"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# cat /opt/rabbitmq/sbin/rabbitmq-defaults")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#!/bin/sh -e")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("### next line potentially updated in package install steps")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("SYS_PREFIX")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("${RABBITMQ_HOME}")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("### next line will be updated when generating a standalone release")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("ERL_DIR")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("CLEAN_BOOT_FILE")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("start_clean\n"),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("SASL_BOOT_FILE")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("start_sasl\n\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("if")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v(" -f "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"'),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("${RABBITMQ_HOME}")]),s._v('/erlang.mk"')]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("then")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# RabbitMQ is executed from its source directory. The plugins")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# directory and ERL_LIBS are tuned based on this.")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("RABBITMQ_DEV_ENV")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("fi")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("## Set default values")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("BOOT_MODULE")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"rabbit"')]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("CONFIG_FILE")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("${SYS_PREFIX}")]),s._v("/etc/rabbitmq/rabbitmq\n"),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("LOG_BASE")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("${SYS_PREFIX}")]),s._v("/var/log/rabbitmq\n"),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("MNESIA_BASE")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("${SYS_PREFIX}")]),s._v("/var/lib/rabbitmq/mnesia\n"),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("ENABLED_PLUGINS_FILE")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("${SYS_PREFIX}")]),s._v("/etc/rabbitmq/enabled_plugins\n\n"),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("PLUGINS_DIR")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"'),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("${RABBITMQ_HOME}")]),s._v('/plugins"')]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# RABBIT_HOME can contain a version number, so default plugins")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# directory can be hard to find if we want to package some plugin")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# separately. When RABBITMQ_HOME points to a standard location where")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# it's usually being installed by package managers, we add")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v('# "/usr/lib/rabbitmq/plugins" to plugin search path.')]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("case")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"'),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$RABBITMQ_HOME")]),s._v('"')]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("in")]),s._v("\n    /usr/lib/rabbitmq/*"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("PLUGINS_DIR")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"/usr/lib/rabbitmq/plugins:'),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$PLUGINS_DIR")]),s._v('"')]),s._v("\n        "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("esac")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("CONF_ENV_FILE")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("${SYS_PREFIX}")]),s._v("/etc/rabbitmq/rabbitmq-env.conf\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 可以看到在这里引用了 rabbitmq-env.conf 路径")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br"),t("span",{staticClass:"line-number"},[s._v("13")]),t("br"),t("span",{staticClass:"line-number"},[s._v("14")]),t("br"),t("span",{staticClass:"line-number"},[s._v("15")]),t("br"),t("span",{staticClass:"line-number"},[s._v("16")]),t("br"),t("span",{staticClass:"line-number"},[s._v("17")]),t("br"),t("span",{staticClass:"line-number"},[s._v("18")]),t("br"),t("span",{staticClass:"line-number"},[s._v("19")]),t("br"),t("span",{staticClass:"line-number"},[s._v("20")]),t("br"),t("span",{staticClass:"line-number"},[s._v("21")]),t("br"),t("span",{staticClass:"line-number"},[s._v("22")]),t("br"),t("span",{staticClass:"line-number"},[s._v("23")]),t("br"),t("span",{staticClass:"line-number"},[s._v("24")]),t("br"),t("span",{staticClass:"line-number"},[s._v("25")]),t("br"),t("span",{staticClass:"line-number"},[s._v("26")]),t("br"),t("span",{staticClass:"line-number"},[s._v("27")]),t("br"),t("span",{staticClass:"line-number"},[s._v("28")]),t("br"),t("span",{staticClass:"line-number"},[s._v("29")]),t("br"),t("span",{staticClass:"line-number"},[s._v("30")]),t("br"),t("span",{staticClass:"line-number"},[s._v("31")]),t("br"),t("span",{staticClass:"line-number"},[s._v("32")]),t("br"),t("span",{staticClass:"line-number"},[s._v("33")]),t("br"),t("span",{staticClass:"line-number"},[s._v("34")]),t("br"),t("span",{staticClass:"line-number"},[s._v("35")]),t("br"),t("span",{staticClass:"line-number"},[s._v("36")]),t("br"),t("span",{staticClass:"line-number"},[s._v("37")]),t("br"),t("span",{staticClass:"line-number"},[s._v("38")]),t("br"),t("span",{staticClass:"line-number"},[s._v("39")]),t("br"),t("span",{staticClass:"line-number"},[s._v("40")]),t("br"),t("span",{staticClass:"line-number"},[s._v("41")]),t("br"),t("span",{staticClass:"line-number"},[s._v("42")]),t("br")])]),t("p",[s._v("先给出官方的配置文档：")]),s._v(" "),t("ul",[t("li",[t("a",{attrs:{href:"https://www.rabbitmq.com/rabbitmq-env.conf.5.html",target:"_blank",rel:"noopener noreferrer"}},[s._v("rabbitmq-env.conf"),t("OutboundLink")],1)]),s._v(" "),t("li",[t("a",{attrs:{href:"https://www.rabbitmq.com/configure.html",target:"_blank",rel:"noopener noreferrer"}},[s._v("configure"),t("OutboundLink")],1)]),s._v(" "),t("li",[t("a",{attrs:{href:"https://www.rabbitmq.com/configure.html#supported-environment-variables",target:"_blank",rel:"noopener noreferrer"}},[s._v("supported-environment-variables"),t("OutboundLink")],1),s._v(" 支持的环境变量")])]),s._v(" "),t("p",[s._v("下面总结一些常用的 RabbitMQ 变量，完成的变量还是去官方查找（笔者发现下面的某些变量在最新版本的官方文档中就已经不在了，还是需要去官方文档看才保险）")]),s._v(" "),t("ul",[t("li",[t("p",[s._v("RABBITMQ_NODE_PORT")]),s._v(" "),t("p",[s._v("监听客户端链接的端口号。")]),s._v(" "),t("p",[s._v("默认为 5672")])]),s._v(" "),t("li",[t("p",[s._v("RABBITMQ_DIST_PORT")]),s._v(" "),t("p",[s._v("RabbitMQ 节点内部通信端口，默认值为 RABBITMQ_NODE_PORT + 20000，即 25672，如果设置了 kernel.inet_dist_listen_min 或 kernel.inect_dist_listen_max 则此环境失效")])]),s._v(" "),t("li",[t("p",[s._v("RABBITMQ_NODENAME")]),s._v(" "),t("p",[s._v("RabbitMQ 节点名称，默认为 "),t("code",[s._v("rabbit@$HOSTNAME")]),s._v("，在每个 Erlang 节点和集群的组合中，节点名称必须唯一")])]),s._v(" "),t("li",[t("p",[s._v("RABBITMQ_CONF_ENV_FILE")]),s._v(" "),t("p",[s._v("环境变量配置文件地址，指定文件 "),t("code",[s._v("rabbitmq-env.conf")]),s._v(" 的地址。")]),s._v(" "),t("p",[s._v("默认值为 "),t("code",[s._v("#RABBITMQ_HOME/etc/rabbitmq/rabbitmq-env.conf")])])]),s._v(" "),t("li",[t("p",[s._v("RABBITMQ_USE_LONGNAME")]),s._v(" "),t("p",[s._v("使用长名称命名，如果当前的 hostname 为 node1.longname，那么默认情况下创建的节点名为  rabbit@node1。")]),s._v(" "),t("p",[s._v("将此参数设置为 true 时，创建的节点名称为 rabbit@node1.longname")])]),s._v(" "),t("li",[t("p",[s._v("RABBITMQ_CONFIG_FILE")]),s._v(" "),t("p",[s._v("配置文件路径。")]),s._v(" "),t("p",[s._v("默认值为 "),t("code",[s._v("$RABBITMQ_HOME/etc/rabbitmq/rabbitmq")]),s._v(" ，注意，该文件没文件后缀")])]),s._v(" "),t("li",[t("p",[s._v("RABBITMQ_MNESIA_BASE")]),s._v(" "),t("p",[s._v("RABBITMQ_MNESIA_DIR 的父目录。除非明确设置了 RABBITMQ_MNESIA_DIR 目录，否则每个节点都应该配置这个环境变量")]),s._v(" "),t("p",[s._v("默认值为："),t("code",[s._v("$RABBITMQ_HOME/var/lib/rabbitmq/mnesia")])]),s._v(" "),t("p",[s._v("对于 RabbitMQ 的操作用户来说，需要对当前目录可读、科协、可创建文件及子目录的权限")])]),s._v(" "),t("li",[t("p",[s._v("RABBITMQ_MNESIA_DIR")]),s._v(" "),t("p",[s._v("包含 RabbitMQ 服务节点的数据库、数据存储及集群状态等目录")]),s._v(" "),t("p",[s._v("默认值为："),t("code",[s._v("$RABBITMQ_MNESIA_BASE/$RABBITMQ_NODENAME")])])]),s._v(" "),t("li",[t("p",[s._v("RABBITMQ_LOGS")]),s._v(" "),t("p",[s._v("RabbitMQ 服务于 Erlang 相关的日志。")]),s._v(" "),t("p",[s._v("默认值为 "),t("code",[s._v("$RABBITMQ_LOG_BASE/$RABBITMQ_NODENAME")]),s._v(".log`")])]),s._v(" "),t("li",[t("p",[s._v("RABBITMQ_LOG_BASE")]),s._v(" "),t("p",[s._v("RabbitMQ 服务日志所在基础目录。")]),s._v(" "),t("p",[s._v("默认值为 "),t("code",[s._v("$RABBITMQ_HOME/var/log/rabbitmq")])])]),s._v(" "),t("li",[t("p",[s._v("RABBITMQ_SASL_LOGS")]),s._v(" "),t("p",[s._v("RabbitMQ 服务与 Erlang 的 SASL（System Application Support Libraries）相关的日志。")]),s._v(" "),t("p",[s._v("默认值为 "),t("code",[s._v("$RABBITMQ_LOG_BASE/$RABBITMQ_NODENAME-sasl.log")])])]),s._v(" "),t("li",[t("p",[s._v("RABBITMQ_PLUGINS_DIR")]),s._v(" "),t("p",[s._v("插件所在路径。")]),s._v(" "),t("p",[s._v("默认值为 "),t("code",[s._v("$RABBITMQ_LOG_BASE/plugins")])])])]),s._v(" "),t("p",[s._v("如果没有特殊需求，不建议更改 RabbitMQ 环境变量。在生产环境中，对于配置和日志有特殊的管理目录，那么可以参考以下相应的配置：")]),s._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 配置文件地址")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("CONFIG_FILE")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("/apps/conf/rabbitmq/rabbitmq\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 环境变量的配置文件地址")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("CONF_ENV_FILE")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("/apps/conf/rabbitmq/rabbitmq-env.conf\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 服务日志地址")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("LOG_BASE")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("/apps/logs/rabbitmq\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# mnesia 路径")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("MNESIA_BASE")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("/app/dbdat/rabbitmq/mnesia\n\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br")])])])}),[],!1,null,null,null);a.default=e.exports}}]);